# 命令模式
## 一.简介
    命令模式最常见的应用场景是：有时候需要向某些对象发送请求，但是并
    不知道请求的接收者是谁，也不知道被请求的操作是什么。此时希望用一
    种松耦合的方式来设计程序，使得请求发送者和请求接收者能够消除彼此
    之间的耦合关系。
## 二.撤销与重做
    我们讨论了如何撤销一个命令。很多时候，我们需要撤销一系列的命令。比如在一个
围棋程序中，现在已经下了 10 步棋，我们需要一次性悔棋到第 5 步。在这之前，我们可以
把所有执行过的下棋命令都储存在一个历史列表中，然后倒序循环来依次执行这些命令的 
undo 操作，直到循环执行到第 5 个命令为止，在某些情况下无法顺利地利用 undo 操作让对
象回到 execute 之前的状态。比如在一个Canvas 画图的程序中。
## 命令队列
    在订餐的故事中，如果订单的数量过多而厨师的人手不够，则可以让这些订单进行排队处
理。第一个订单完成之后，再开始执行跟第二个订单有关的操作。队列在动画中的运用场景也
非常多，比如之前的小球运动程序有可能遇到另外一个问题：有些用户反馈，这个程序只适合
于 APM 小于 20 的人群，大部分用户都有快速连续点击按钮的习惯，当用户第二次点击 
button 的时候，此时小球的前一个动画可能尚未结束，于是前一个动画会骤然停止，小球转
而开始第二个动画的运动过程。但这并不是用户的期望，用户希望这两个动画会排队进行。
把请求封装成命令对象的优点在这里再次体现了出来，对象的生命周期几乎是永久的，除非
我们主动去回收它。也就是说，命令对象的生命周期跟初始请求发生的时间无关， command 
对象的 execute 方法可以在程序运行的任何时刻执行，即使点击按钮的请求早已发生，但我
们的命令对象仍然是有生命的。所以我们可以把 div 的这些运动过程都封装成命令对象，再把
它们压进一个队列堆栈，当动画执行完，也就是当前 command 对象的职责完成之后，会主动
通知队列，此时取出正在队列中等待的第一个命令对象，并且执行它。
我们比较关注的问题是，一个动画结束后该如何通知队列。通常可以使用回调函数来通知队
列，除了回调函数之外，还可以选择发布订阅模式。即在一个动画结束后发布一个消息，订阅
者接收到这个消息之后，便开始执行队列里的下一个动画。读者可以尝试按照这个思路来自行
实现一个队列动画